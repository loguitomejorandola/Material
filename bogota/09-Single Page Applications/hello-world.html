<html>
<head>
    <script type='text/javascript' src='/static/jquery-1.9.0.js'></script>
    <script type='text/javascript' src='/static/knockout-2.2.1.debug.js'></script>
</head>
<body>

<div id="contact">
    <h2>Venta</h2>
    <div data-bind="template: { name: 'person-template', data: buyer }"></div>
    <div data-bind="template: { name: 'person-template', data: seller }"></div>
</div>
 
<script type="text/html" id="person-template">
    <h3 data-bind="text: name"></h3>
    <p>Pesos: <span data-bind="text: credits"></span></p>
</script>
 
<script type="text/javascript">
    function Contact() {
        this.buyer = { 
            name: ko.observable('Bob[comprador]'), 
            credits: ko.observable(2500)
        };
        this.seller = {
            name: ko.observable('Mario[vendedor]'), 
            credits: ko.observable(5800)
        };
    }

    Contact.prototype.sell = function(credits) {
        var sellerCredits = contact.seller.credits();
        var buyerCredits = contact.buyer.credits();

        console.log(sellerCredits, buyerCredits);

        this.seller.credits(sellerCredits + credits);
        this.buyer.credits(buyerCredits - credits);
    };

    var contact = new Contact()
    ko.applyBindings(contact, $('#contact').get(0) );

    
</script>

</body>
</html>
